!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.resizeDetector={})}(this,function(e){"use strict";var t=null;var r=null;function i(e,t){void 0===t&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(e){r[e]=t[e]}),r}function _(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if("none"===getComputedStyle(t).display)return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var n='.resize-triggers{visibility:hidden;opacity:0}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',s=0,o=null;function d(){var e,i,_=this;l(this),this.__resize_raf__&&(e=this.__resize_raf__,r||(r=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),r(e)),this.__resize_raf__=(i=function(){var e,t,r,i,n,s,o=(t=(e=_).__resize_last__,r=t.width,i=t.height,n=e.offsetWidth,s=e.offsetHeight,n!==r||s!==i?{width:n,height:s}:null);o&&(_.__resize_last__=o,a(_))},t||(t=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),t(i))}function a(e){e.__resize_listeners__.forEach(function(t){t.call(e)})}function l(e){var t=e.__resize_triggers__,r=t.expand,i=t.expandChild,_=t.contract,n=_.scrollWidth,s=_.scrollHeight,o=r.offsetWidth,d=r.offsetHeight,a=r.scrollWidth,l=r.scrollHeight;_.scrollLeft=n,_.scrollTop=s,i.style.width=o+1+"px",i.style.height=d+1+"px",r.scrollLeft=a,r.scrollTop=l}e.addListener=function(e,t){var r,c;if(e.__resize_mutation_handler__||(e.__resize_mutation_handler__=function(){var e=_(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&(l(this),this.addEventListener("scroll",d,!0)),this.__resize_rendered__=t,a(this))}.bind(e)),!e.__resize_listeners__)if(e.__resize_listeners__=[],window.ResizeObserver){var h=new ResizeObserver(function(){a(e)});h.observe(e),e.__resize_observer__=h}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){a(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(s||(r=n,(c=document.createElement("style")).type="text/css",c.styleSheet?c.styleSheet.cssText=r:c.appendChild(document.createTextNode(r)),(document.querySelector("head")||document.body).appendChild(c),o=c),function(e){var t=getComputedStyle(e).position;"static"===t&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=i("div",{className:"resize-triggers"}),_=i("div",{className:"resize-expand-trigger"}),n=i("div"),s=i("div",{className:"resize-contract-trigger"});_.appendChild(n),r.appendChild(_),r.appendChild(s),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:_,expandChild:n,contract:s},l(e),e.addEventListener("scroll",d,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}(e),e.__resize_rendered__=_(e).rendered,window.MutationObserver){var u=new MutationObserver(e.__resize_mutation_handler__);u.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=u}e.__resize_listeners__.push(t),s++},e.removeListener=function(e,t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);var r=e.__resize_listeners__;r.splice(r.indexOf(t),1),r.length||(e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__=null):(e.__resize_mutation_observer__&&e.__resize_mutation_observer__.unobserve(e),e.removeEventListener("scroll",d),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null,e.__resize_listeners__=null)),!--s&&o&&o.parentNode.removeChild(o)},Object.defineProperty(e,"__esModule",{value:!0})});
